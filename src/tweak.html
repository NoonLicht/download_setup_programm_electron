<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download App</title>
    <link rel="stylesheet" href="static/tweak.css">
    <script src="script/topbar.js"></script>
    <script src="script/tweakmenu.js"></script>
</head>
<style>
    body {
        width: 1200px;
        height: 650px;
    }

</style>

<body>
        <div class="titlebar" id="titlebar">
            <button class="close" id="closeBtn">
                <svg width="100%" height="100%" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                </svg>
            </button>
            <button class="minimize" id="minimizeBtn" style="display: flex; justify-content: center;">
                <svg width="100%" height="100%" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 12h14"></path>
                </svg>
            </button>
            <button class="navbutton" id="menuBtn" style="display: flex; justify-content: center;" onclick="navigateToIndex()">
                <svg width="100%" height="100%" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 6h13"></path>
                    <path d="M8 12h13"></path>
                    <path d="M8 18h13"></path>
                    <path d="M3 6h.01"></path>
                    <path d="M3 12h.01"></path>
                    <path d="M3 18h.01"></path>
                </svg>
            </button>
            <button class="navbutton" id="tweakerBtn" onclick="navigateToTweak()">
                <svg width="100%" height="100%" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z">
                    </path>
                </svg>
            </button>
        </div>
    <script>
        function navigateToIndex() {
            ipcRenderer.send('navigateToIndex');
        }

        function navigateToTweak() {
            ipcRenderer.send('navigateToTweak');
        }
    </script>
    <div class="tweakmenu">
        <div class="menu">
            <button class="menu-button" id="confidentiality">Конфиденциальность</button>
            <button class="menu-button" id="personalization">Персонализация</button>
            <button class="menu-button" id="system">Система</button>
            <button class="menu-button" id="security">Безопасность</button>
        </div>
        <div class="submenu">
        
        </div>
        <div class="description">
            
        </div>
    </div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var menuButtons = document.querySelectorAll('.menu-button');
        var submenu = document.querySelector('.submenu');

        menuButtons.forEach(function (button) {
            button.addEventListener('click', function () {
                menuButtons.forEach(function (btn) {
                    btn.classList.remove('active');
                });

                button.classList.add('active');
                loadFile(button.id);
            });
        });

        function loadFile(buttonId) {
            var fileName = buttonId.toLowerCase() + '.txt';
            var filePath = 'tweak/' + fileName;

            fetch(filePath)
                .then(response => response.text())
                .then(data => {
                    // Разделение строк, начинающихся с точки
                    var lines = data.split('\n');
                    var formattedText = lines.map(line => line.startsWith('.') ? line.slice(1) : line).join('\n');

                    // Отображение отформатированного текста в подменю
                    displayFormattedText(formattedText);
                })
                .catch(error => {
                    console.error('Ошибка загрузки файла:', error);
                    // Обработка ошибок, например, вывод сообщения об ошибке в подменю
                    displayError();
                });
        }

        function displayFormattedText(text) {
            var lines = text.split('\n');
            var htmlContent = '';

            lines.forEach(function (line) {
                // Создание чекбокса для каждой строки
                var checkboxId = 'checkbox-' + Math.random().toString(36).substring(7); // Генерация уникального ID
                htmlContent += '<div class="tweak-check"><input type="checkbox" id="' + checkboxId + '"><label for="' + checkboxId + '">' + line + '</label></div>';
            });

            // Отображение HTML-контента в подменю
            submenu.innerHTML = htmlContent;

            // Добавление обработчика событий для выделения строки при клике
            var tweakChecks = document.querySelectorAll('.tweak-check');
            tweakChecks.forEach(function (tweakCheck) {
                tweakCheck.addEventListener('click', function () {
                    this.classList.toggle('active');
                });
            });
        }

        function displayError() {
            submenu.innerHTML = '<p>Ошибка загрузки файла.</p>';
        }
    });
</script>
    <div class="con">
        <div class="com"></div>
    </div>
</body>
</html>